# For more information on this configuration, see the complete reference guide at
# https://grafana.com/docs/tempo/latest/configuration/

stream_over_http_enabled: true    # Enables result streaming from Tempo (to Grafana).

server:
  http_listen_port: 3200

distributor:
  receivers:
    otlp:
      protocols:
        http:
          endpoint: "0.0.0.0:4318"
        grpc:
          endpoint: "0.0.0.0:4317"

# The ingester processes spans into indices and blocks.
ingester:
  trace_idle_period: 10s       # The length of time after a trace has not received spans to consider it complete and flush it.
  max_block_bytes: 1_000_000   # Cut the head block when it hits this size or
  max_block_duration: 5m       # this much time passes

# Compacts TSDB blocks
compactor:
  compaction:
    compaction_window: 1h              # Blocks in this time window will be compacted together.
    max_block_bytes: 100_000_000       # Maximum size of a compacted block.
    block_retention: 100h               # How long to keep blocks.
    compacted_block_retention: 10m     # How long to keep compacted blocks.

# Config TSDB storage
storage:
  trace:
    backend: local
    block:
      bloom_filter_false_positive: .05
    wal:                               
      path: /tmp/tempo/wal             # Write Ahead Log (WAL) configuration.
    local:
      path: /tmp/tempo/blocks          # Directory to store the TSDB blocks.
    pool:                              # Pool used for finding trace IDs.
      max_workers: 100                 # Worker pool determines the number of parallel requests to the object store backend.
      queue_depth: 10000               # Maximum depth for the querier queue jobs. A job is required for each block searched.

